"use strict";(self.webpackChunkfinance_dashboard=self.webpackChunkfinance_dashboard||[]).push([[301],{72467:(e,s,r)=>{r.d(s,{Me:()=>t,uI:()=>i,yk:()=>l});var n=r(89731);const t=async e=>{try{return(await n.ZP.put(n.Hv.submission.update,e)).data}catch(s){throw console.error("Error updating forecast:",s),s}},l=async e=>{try{return(await n.ZP.get(n.Hv.submission.getSubmissionByDate,{params:{selectedDate:e}})).data}catch(s){throw console.error("Error fetching submission:",s.response?s.response.data:s.message),s}},i=async e=>{try{const s=await n.ZP.get(n.Hv.submission.submissionDifference,{params:{selectedDate:e}});return console.log("Submission retrieved successfully:",s.data),s.data}catch(s){throw console.error("Error fetching submission:",s.response?s.response.data:s.message),s}}},4301:(e,s,r)=>{r.r(s),r.d(s,{default:()=>C});var n=r(6907),t=r(3161),l=r(89164),i=r(4567),a=r(59513),o=r.n(a),c=(r(68639),r(72791)),d=r(82078),u=r(44e3),h=r(57621),x=r(39281),j=r(79836),v=r(56890),Z=r(9195),f=r(68745),p=r(53382),m=r(48550),g=r(83582),y=r(13239),b=r(57689),F=r(72467),D=r(38072),S=r(80184);const w=e=>{var s,r,n,l;let{data:a,selectedDate:o}=e;const d=(0,b.s0)(),u=new Date(o).toISOString().split("T")[0],[w,P]=(0,c.useState)((null===a||void 0===a||null===(s=a.revenue)||void 0===s?void 0:s.map((()=>({value:""}))))||[]),[C,k]=(0,c.useState)((null===a||void 0===a||null===(r=a.expense)||void 0===r?void 0:r.map((()=>({value:""}))))||[]),[R,M]=(0,c.useState)(0),[E,I]=(0,c.useState)(0),[z,H]=(0,c.useState)(!1);return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(h.Z,{children:[(0,S.jsx)(i.Z,{sx:{p:2,fontWeight:"500",fontSize:"18px"},children:"Revenue"}),(0,S.jsx)(x.Z,{children:(0,S.jsxs)(j.Z,{children:[(0,S.jsx)(v.Z,{children:(0,S.jsxs)(Z.Z,{children:[(0,S.jsx)(f.Z,{children:"Revenue"}),(0,S.jsx)(f.Z,{children:"Difference From Prior Period"}),(0,S.jsx)(f.Z,{children:"Difference from Forecast"}),(0,S.jsx)(f.Z,{children:"Forecast Next Reporting Period"})]})}),(0,S.jsx)(p.Z,{children:null===a||void 0===a||null===(n=a.revenue)||void 0===n?void 0:n.map(((e,s)=>{var r;return(0,S.jsxs)(Z.Z,{children:[(0,S.jsx)(f.Z,{children:(null===e||void 0===e?void 0:e.name)||""}),(0,S.jsx)(f.Z,{children:(null===e||void 0===e?void 0:e.value)||"0"}),(0,S.jsx)(f.Z,{children:(null===e||void 0===e?void 0:e.forecast)||0}),(0,S.jsx)(f.Z,{children:(0,S.jsx)(m.Z,{value:(null===(r=w[s])||void 0===r?void 0:r.value)||"",onChange:e=>((e,s)=>{P((r=>{const n=[...r];for(;n.length<=e;)n.push({value:""});return n[e].value=s,n}))})(s,e.target.value),label:"Forecast"})})]},"revenue-".concat(s))}))})]})})]}),(0,S.jsxs)(h.Z,{sx:{mt:4},children:[(0,S.jsx)(i.Z,{sx:{p:2,fontWeight:"500",fontSize:"18px"},children:"Expense"}),(0,S.jsx)(x.Z,{children:(0,S.jsxs)(j.Z,{children:[(0,S.jsx)(v.Z,{children:(0,S.jsxs)(Z.Z,{children:[(0,S.jsx)(f.Z,{children:"Expense"}),(0,S.jsx)(f.Z,{children:"Difference From Prior Period"}),(0,S.jsx)(f.Z,{children:"Difference from Forecast"}),(0,S.jsx)(f.Z,{children:"Forecast Next Reporting Period"})]})}),(0,S.jsx)(p.Z,{children:null===a||void 0===a||null===(l=a.expense)||void 0===l?void 0:l.map(((e,s)=>{var r;return(0,S.jsxs)(Z.Z,{children:[(0,S.jsx)(f.Z,{children:null===e||void 0===e?void 0:e.name}),(0,S.jsx)(f.Z,{children:null===e||void 0===e?void 0:e.value}),(0,S.jsx)(f.Z,{children:(null===e||void 0===e?void 0:e.forecast)||"0"}),(0,S.jsx)(f.Z,{children:(0,S.jsx)(m.Z,{label:"Forecast",value:(null===(r=C[s])||void 0===r?void 0:r.value)||"",onChange:e=>((e,s)=>{k((r=>{const n=[...r];for(;n.length<=e;)n.push({value:""});return n[e].value=s,n}))})(s,e.target.value)})})]},"expense-".concat(s))}))})]})})]}),(0,S.jsxs)(h.Z,{sx:{mt:4},children:[(0,S.jsx)(i.Z,{sx:{p:2,fontWeight:"500",fontSize:"18px"},children:"Salary and Rent"}),(0,S.jsx)(x.Z,{children:(0,S.jsxs)(j.Z,{children:[(0,S.jsx)(v.Z,{children:(0,S.jsxs)(Z.Z,{children:[(0,S.jsx)(f.Z,{children:"Expense"}),(0,S.jsx)(f.Z,{children:"Difference From Prior Period"}),(0,S.jsx)(f.Z,{children:"Difference from Forecast"}),(0,S.jsx)(f.Z,{children:"Forecast Next Reporting Period"})]})}),(0,S.jsxs)(p.Z,{children:[(0,S.jsxs)(Z.Z,{children:[(0,S.jsx)(f.Z,{children:"Salary"}),(0,S.jsx)(f.Z,{children:null===a||void 0===a?void 0:a.salary}),(0,S.jsx)(f.Z,{children:"0"}),(0,S.jsx)(f.Z,{children:(0,S.jsx)(m.Z,{label:"Forecast",value:R,onChange:e=>M(e.target.value)})})]}),(0,S.jsxs)(Z.Z,{children:[(0,S.jsx)(f.Z,{children:"Rent"}),(0,S.jsx)(f.Z,{children:null===a||void 0===a?void 0:a.rent}),(0,S.jsx)(f.Z,{children:"0"}),(0,S.jsx)(f.Z,{children:(0,S.jsx)(m.Z,{label:"Forecast",value:E,onChange:e=>I(e.target.value)})})]})]})]})})]}),(0,S.jsx)(t.Z,{sx:{display:"flex",justifyContent:"flex-end",mt:4},children:(0,S.jsx)(g.Z,{type:"submit",variant:"contained",color:"success",disabled:z,onClick:async e=>{e.preventDefault(),H(!0);const s={revenueForecasts:w.map((e=>e.value)),expenseForecasts:C.map((e=>e.value)),salaryForecast:R,rentForecast:E,selectedDate:u};try{const e=await(0,F.Me)(s);console.log("Forecast updated successfully:",e),d(D.H.dashboard.root)}catch(r){console.error("Failed to update forecast:",r)}finally{H(!1)}},children:z?(0,S.jsx)(y.Z,{size:24}):"Submit"})})]})};r(51938);function P(){const e=(0,d.K$)(),[s,r]=(0,c.useState)(new Date),[n,a]=(0,c.useState)(null);return(0,c.useEffect)((()=>{(async()=>{try{if(s){const e=new Date(s);e.setDate(1);const r=e.toISOString().split("T")[0],n=await(0,F.uI)(r);a(n)}}catch(e){console.error("Failed to fetch submission:",e)}})()}),[s]),(0,S.jsxs)(l.Z,{maxWidth:!e.themeStretch&&"xl",children:[(0,S.jsxs)(t.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:2},children:[(0,S.jsx)(i.Z,{variant:"h4",children:" Revenue Details"}),(0,S.jsxs)(t.Z,{sx:{display:"flex",justifyContent:"flex-end",mr:4,border:"2px solid",borderColor:"#007867",borderRadius:1,p:.2},children:[(0,S.jsx)(u.Z,{icon:"lsicon:calendar-outline",width:34,sx:{pt:.5,color:"red"}}),(0,S.jsx)(o(),{selected:s,onChange:e=>{r(e)},dateFormat:"MMMM, yyyy",showMonthYearPicker:!0,showFullMonthYearPicker:!0,isClearable:!0,placeholderText:"Select a month/year",className:"custom-datepicker"})]})]}),(0,S.jsx)(w,{data:null===n||void 0===n?void 0:n.data,selectedDate:s})]})}function C(){return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(n.ql,{children:(0,S.jsx)("title",{children:" Dashboard: Details"})}),(0,S.jsx)(P,{})]})}},51938:()=>{}}]);
//# sourceMappingURL=301.dc386e00.chunk.js.map