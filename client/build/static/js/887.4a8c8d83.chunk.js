"use strict";(self.webpackChunkfinance_dashboard=self.webpackChunkfinance_dashboard||[]).push([[887],{6887:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var a=n(6907),s=n(72791),r=n(89164),o=n(3161),l=n(4567),c=n(94721),i=n(12258),d=n(35785),u=n(97892),h=n.n(u),x=n(37592),p=n(89731),j=n(82078),g=n(8976),f=n(34045),m=n(57621),Z=n(48550),y=n(63466),v=n(13400),b=n(83582),S=n(39281),w=n(79836),C=n(56890),A=n(9195),I=n(68745),P=n(80720),R=n(53382),M=n(3157),_=n(82167),k=n(66934),D=n(48068),Y=n(80184);const U=(0,k.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});const E=function(e){let{onSetResult:t,currentResult:n,titleArray:a}=e;const[r,c]=(0,s.useState)([]),[i,d]=(0,s.useState)(""),[u,h]=(0,s.useState)(""),[x,p]=(0,s.useState)(""),[j,g]=(0,s.useState)("asc"),[k,E]=(0,s.useState)(0),[H,O]=(0,s.useState)(10),q=[...r].sort(((e,t)=>{if(!x)return 0;const n=a.indexOf(x);return e[n]<t[n]?"asc"===j?-1:1:e[n]>t[n]?"asc"===j?1:-1:0})).filter((e=>{var t;return null===(t=e[0])||void 0===t?void 0:t.toString().includes(i)})),z=q.slice(k*H,k*H+H);return(0,s.useEffect)((()=>{c(n)}),[n]),(0,Y.jsx)(o.Z,{sx:{display:"flex",flexDirection:"column",position:"relative",width:"100%",justifyContent:"top",alignItems:"center"},children:(0,Y.jsxs)(m.Z,{sx:{width:"100%",p:2},children:[(0,Y.jsxs)(l.Z,{sx:{fontWeight:"500",fontSize:"18px"},children:[3===a.length?"Chart of Account":"Monthly Result"," Table"]}),(0,Y.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2,mb:2},children:[(0,Y.jsx)(Z.Z,{variant:"outlined",size:"small",value:u,onChange:e=>{h(e.target.value)},placeholder:"Search by AccountID",InputProps:{endAdornment:(0,Y.jsx)(y.Z,{position:"end",children:(0,Y.jsx)(v.Z,{edge:"end",color:"primary",onClick:()=>{d(u)},children:(0,Y.jsx)(_.Z,{})})})},sx:{width:"40%"}}),(0,Y.jsxs)(b.Z,{component:"label",color:"primary",variant:"contained",startIcon:(0,Y.jsx)(D.Z,{}),children:["Upload files",(0,Y.jsx)(U,{type:"file",accept:".xlsx",onChange:e=>(e=>{const n=e.target.files[0];if(n){const e=new FileReader;e.onload=e=>{const n=new Uint8Array(e.target.result),a=f.ij(n,{type:"array"}),s=a.SheetNames[0],r=a.Sheets[s],o=f.P6.sheet_to_json(r,{header:1});if(o.length>0){const e=o.slice(1);t(e),c(e),console.log(e)}},e.readAsArrayBuffer(n)}})(e),multiple:!1})]})]}),(0,Y.jsx)(S.Z,{children:(0,Y.jsxs)(w.Z,{children:[(0,Y.jsx)(C.Z,{children:(0,Y.jsx)(A.Z,{children:a.map(((e,t)=>(0,Y.jsx)(I.Z,{style:{textAlign:"center"},children:(0,Y.jsx)(P.Z,{active:x===e,direction:x===e?j:"asc",onClick:()=>{return g(x===(t=e)&&"asc"===j?"desc":"asc"),void p(t);var t},children:e})},t)))})}),(0,Y.jsx)(R.Z,{children:z.map(((e,t)=>(0,Y.jsx)(A.Z,{children:e.map(((e,t)=>(0,Y.jsx)(I.Z,{style:{border:"none",padding:"8px",textAlign:"center"},children:e},t)))},t)))})]})}),(0,Y.jsx)(M.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:q.length,rowsPerPage:H,page:k,onPageChange:(e,t)=>{E(t)},onRowsPerPageChange:e=>{O(parseInt(e.target.value,10)),E(0)}})]})})};n(51938);const H=["AccountID","Revenue/Expense Description","Amount($)","Revenue/Expense ID"],O=["AccountID","Description","Roll UP"];function q(){const e=(0,j.K$)(),{user:t}=(0,g.E)(),[n,a]=(0,s.useState)(h()()),[u,f]=(0,s.useState)([]),[m,Z]=(0,s.useState)([]),[y,v]=(0,s.useState)(!1),[b,S]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{(async()=>{const e=h()(n).format("MMMM YYYY"),a={userId:t._id,date:e};await p.ZP.post(p.Hv.revenue.getRevenue,a).then((e=>{f(e.data.data.data)})).catch((e=>{f([])}))})(),(async()=>{const e={userId:t._id};await p.ZP.post(p.Hv.coa.getCOA,e).then((e=>{Z(e.data.data.data)})).catch((e=>{Z([])}))})()}),[n,t._id]),(0,Y.jsxs)(r.Z,{maxWidth:!e.themeStretch&&"xl",children:[(0,Y.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:2},children:[(0,Y.jsx)(l.Z,{variant:"h4",children:" Upload Monthly Result "}),(0,Y.jsx)(o.Z,{sx:{display:"flex",justifyContent:"flex-end",mr:4,border:"2px solid",borderColor:"#007867",borderRadius:1,p:.2},children:(0,Y.jsx)(d.M,{value:n,onChange:e=>{a(e)}})})]}),(0,Y.jsx)(E,{onSetResult:e=>{f(e)},currentResult:u,titleArray:H}),(0,Y.jsx)(i.Z,{component:"label",color:"primary",variant:"contained",onClick:async()=>{v(!0);const e=h()(n).format("MMMM YYYY"),a={userId:t._id,date:e,data:u};a.data&&0!==a.data.length?await p.ZP.post(p.Hv.revenue.create,a).then((e=>{console.log(e.data),v(!1)})).catch((e=>{v(!1),console.log(e)})):(console.log("data required!"),v(!1))},loading:y,sx:{mt:2,mb:2},startIcon:(0,Y.jsx)(x.Z,{}),children:"Submit"}),(0,Y.jsx)(c.Z,{sx:{borderStyle:"dashed",mb:2}}),(0,Y.jsx)(l.Z,{variant:"h4",sx:{mb:2},children:" Upload Chart of Account "}),(0,Y.jsx)(E,{onSetResult:e=>{Z(e)},currentResult:m,titleArray:O}),(0,Y.jsx)(i.Z,{component:"label",color:"primary",variant:"contained",onClick:async()=>{S(!0);const e={userId:t._id,data:m};e.data&&0!==e.data.length?await p.ZP.post(p.Hv.coa.create,e).then((e=>{console.log(e.data),S(!1)})).catch((e=>{S(!1),console.log(e)})):(console.log("data required!"),S(!1))},loading:b,sx:{mt:2,mb:2},startIcon:(0,Y.jsx)(x.Z,{}),children:"Submit COA"})]})}function z(){return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(a.ql,{children:(0,Y.jsx)("title",{children:" Dashboard: UploadResult"})}),(0,Y.jsx)(q,{})]})}},51938:()=>{}}]);
//# sourceMappingURL=887.4a8c8d83.chunk.js.map